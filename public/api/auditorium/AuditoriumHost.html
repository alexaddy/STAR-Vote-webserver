<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Wed May 21 14:12:33 CDT 2014 -->
<title>AuditoriumHost</title>
<meta name="date" content="2014-05-21">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AuditoriumHost";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../auditorium/AuditoriumDiscoveryHost.html" title="class in auditorium"><span class="strong">Prev Class</span></a></li>
<li><a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?auditorium/AuditoriumHost.html" target="_top">Frames</a></li>
<li><a href="AuditoriumHost.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">auditorium</div>
<h2 title="Class AuditoriumHost" class="title">Class AuditoriumHost</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>auditorium.AuditoriumHost</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">AuditoriumHost</span>
extends java.lang.Object
implements <a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></pre>
<div class="block">This is the top level class that an application should interface with if it
 wishes to use auditorium.<br>
 <br>
 In addition to providing the library API for accessing the auditorium
 network, this class is the keeper of three threads. In order to make sure
 these threads are running when they should be, only interleave calls to the
 API between a call to start() and stop().<br>
 <b>Announce</b>: This thread takes announcements placed on the queue by the
 user, formats them as messages (this includes signing), floods them to the
 network and puts them into the log. <br>
 <b>Receive</b>: This thread takes messages that are heard by individual
 links and does the appropriate thing with them (ignore or flood/tell
 application). <b>Join</b>: This thread listens for join requests, responds
 appropriately, and sets up link structures.<br>
 <br>
 All thread synchronization (including the three aforementioned threads and
 each link thread) is done in this class. This means that all other auditorium
 classes are not thread safe. This is done to simplify matters.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium">AuditoriumHost.Pair</a></strong></code>
<div class="block">Messages that get passed to the application layer are wrapped with a
 pointer to the host that they came from.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../auditorium/IAuditoriumParams.html" title="interface in auditorium">IAuditoriumParams</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_constants">_constants</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_counter">_counter</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../auditorium/AuditoriumDiscoveryHost.html" title="class in auditorium">AuditoriumDiscoveryHost</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_discover">_discover</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../auditorium/IAuditoriumLayer.html" title="interface in auditorium">IAuditoriumLayer</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_head">_head</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../auditorium/Event.html" title="class in auditorium">Event</a>&lt;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_hostJoined">_hostJoined</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../auditorium/Event.html" title="class in auditorium">Event</a>&lt;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_hostLeft">_hostLeft</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;<a href="../auditorium/Link.html" title="class in auditorium">Link</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_hosts">_hosts</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../auditorium/SynchronizedQueue.html" title="class in auditorium">SynchronizedQueue</a>&lt;<a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium">AuditoriumHost.Pair</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_inqueue">_inqueue</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.String,<a href="../auditorium/IAuditoriumLayer.html" title="interface in auditorium">IAuditoriumLayer</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_layers">_layers</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.net.ServerSocket</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_listensocket">_listensocket</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../auditorium/Log.html" title="class in auditorium">Log</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_log">_log</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_me">_me</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_nodeid">_nodeid</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../auditorium/SynchronizedQueue.html" title="class in auditorium">SynchronizedQueue</a>&lt;<a href="../sexpression/ASExpression.html" title="class in sexpression">ASExpression</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_outqueue">_outqueue</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../auditorium/SynchronizedQueue.html" title="class in auditorium">SynchronizedQueue</a>&lt;<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_pendingqueue">_pendingqueue</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_running">_running</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#_sequence">_sequence</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../auditorium/AuditoriumHost.html#AuditoriumHost(java.lang.String, auditorium.IAuditoriumParams)">AuditoriumHost</a></strong>(java.lang.String&nbsp;machineName,
              <a href="../auditorium/IAuditoriumParams.html" title="interface in auditorium">IAuditoriumParams</a>&nbsp;constants)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#announce(sexpression.ASExpression)">announce</a></strong>(<a href="../sexpression/ASExpression.html" title="class in sexpression">ASExpression</a>&nbsp;announcement)</code>
<div class="block">Place an announcement on the wire and log it.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#announceThread()">announceThread</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#disconnect()">disconnect</a></strong>()</code>
<div class="block">Disconnect all links, but continue running threads (and continue
 accepting join requests).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>[]</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#discover()">discover</a></strong>()</code>
<div class="block">Discover if there are other hosts nearby.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#flood(auditorium.Message)">flood</a></strong>(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</code>
<div class="block">Assume lock is already acquired!</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../sexpression/ListExpression.html" title="class in sexpression">ListExpression</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#getAddresses()">getAddresses</a></strong>()</code>
<div class="block">Get all the addresses that are in this network.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../auditorium/IAuditoriumLayer.html" title="interface in auditorium">IAuditoriumLayer</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#getLayerByName(java.lang.String)">getLayerByName</a></strong>(java.lang.String&nbsp;layer)</code>
<div class="block">Ask the host if it knows of a layer with the given name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../auditorium/Log.html" title="class in auditorium">Log</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#getLog()">getLog</a></strong>()</code>
<div class="block">Get the Log instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#getMe()">getMe</a></strong>()</code>
<div class="block">Get a pointer to the host.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#getMyIP()">getMyIP</a></strong>()</code>
<div class="block">Get the IP address of this machine.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#getNodeId()">getNodeId</a></strong>()</code>
<div class="block">Get the node ID of this auditorium host.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#join(auditorium.HostPointer)">join</a></strong>(<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&nbsp;host)</code>
<div class="block">Create a link to a specific host.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#joinListenerThread()">joinListenerThread</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium">AuditoriumHost.Pair</a></code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#listen()">listen</a></strong>()</code>
<div class="block">Listen for a broadcast message, and return when it happens.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#logMessage(auditorium.Message)">logMessage</a></strong>(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</code>
<div class="block">Assume lock is already acquired!</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#nextSequence()">nextSequence</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#receiveAnnouncement(auditorium.Message)">receiveAnnouncement</a></strong>(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</code>
<div class="block">Notify the host that message was received on a link.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#receiveThread()">receiveThread</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#registerForJoined(java.util.Observer)">registerForJoined</a></strong>(java.util.Observer&nbsp;observer)</code>
<div class="block">Register an observer to be notified when new nodes join this one.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#registerForLeft(java.util.Observer)">registerForLeft</a></strong>(java.util.Observer&nbsp;observer)</code>
<div class="block">Register an observer to be notified when a particular node leaves the
 network.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#removeLink(auditorium.Link)">removeLink</a></strong>(<a href="../auditorium/Link.html" title="class in auditorium">Link</a>&nbsp;link)</code>
<div class="block">Remove this host's link</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#start()">start</a></strong>()</code>
<div class="block">Start the threads.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#stop()">stop</a></strong>()</code>
<div class="block">Stop the threads.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../auditorium/AuditoriumHost.html#verify(auditorium.Message)">verify</a></strong>(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</code>
<div class="block">Add a message to the verifier's log data, and if the counter is a
 multiple of 10, run the verifier.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="_layers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_layers</h4>
<pre>private final&nbsp;java.util.HashMap&lt;java.lang.String,<a href="../auditorium/IAuditoriumLayer.html" title="interface in auditorium">IAuditoriumLayer</a>&gt; _layers</pre>
</li>
</ul>
<a name="_head">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_head</h4>
<pre>private final&nbsp;<a href="../auditorium/IAuditoriumLayer.html" title="interface in auditorium">IAuditoriumLayer</a> _head</pre>
</li>
</ul>
<a name="_discover">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_discover</h4>
<pre>private final&nbsp;<a href="../auditorium/AuditoriumDiscoveryHost.html" title="class in auditorium">AuditoriumDiscoveryHost</a> _discover</pre>
</li>
</ul>
<a name="_constants">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_constants</h4>
<pre>private final&nbsp;<a href="../auditorium/IAuditoriumParams.html" title="interface in auditorium">IAuditoriumParams</a> _constants</pre>
</li>
</ul>
<a name="_inqueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_inqueue</h4>
<pre>private final&nbsp;<a href="../auditorium/SynchronizedQueue.html" title="class in auditorium">SynchronizedQueue</a>&lt;<a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium">AuditoriumHost.Pair</a>&gt; _inqueue</pre>
</li>
</ul>
<a name="_outqueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_outqueue</h4>
<pre>private final&nbsp;<a href="../auditorium/SynchronizedQueue.html" title="class in auditorium">SynchronizedQueue</a>&lt;<a href="../sexpression/ASExpression.html" title="class in sexpression">ASExpression</a>&gt; _outqueue</pre>
</li>
</ul>
<a name="_pendingqueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_pendingqueue</h4>
<pre>private final&nbsp;<a href="../auditorium/SynchronizedQueue.html" title="class in auditorium">SynchronizedQueue</a>&lt;<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&gt; _pendingqueue</pre>
</li>
</ul>
<a name="_me">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_me</h4>
<pre>private final&nbsp;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a> _me</pre>
</li>
</ul>
<a name="_nodeid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_nodeid</h4>
<pre>private final&nbsp;java.lang.String _nodeid</pre>
</li>
</ul>
<a name="_hosts">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_hosts</h4>
<pre>private final&nbsp;java.util.ArrayList&lt;<a href="../auditorium/Link.html" title="class in auditorium">Link</a>&gt; _hosts</pre>
</li>
</ul>
<a name="_hostJoined">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_hostJoined</h4>
<pre>private final&nbsp;<a href="../auditorium/Event.html" title="class in auditorium">Event</a>&lt;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&gt; _hostJoined</pre>
</li>
</ul>
<a name="_hostLeft">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_hostLeft</h4>
<pre>private final&nbsp;<a href="../auditorium/Event.html" title="class in auditorium">Event</a>&lt;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&gt; _hostLeft</pre>
</li>
</ul>
<a name="_log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_log</h4>
<pre>private final&nbsp;<a href="../auditorium/Log.html" title="class in auditorium">Log</a> _log</pre>
</li>
</ul>
<a name="_counter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_counter</h4>
<pre>private&nbsp;long _counter</pre>
</li>
</ul>
<a name="_listensocket">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_listensocket</h4>
<pre>private&nbsp;java.net.ServerSocket _listensocket</pre>
</li>
</ul>
<a name="_running">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_running</h4>
<pre>private volatile&nbsp;boolean _running</pre>
</li>
</ul>
<a name="_sequence">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>_sequence</h4>
<pre>private volatile&nbsp;long _sequence</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AuditoriumHost(java.lang.String, auditorium.IAuditoriumParams)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AuditoriumHost</h4>
<pre>public&nbsp;AuditoriumHost(java.lang.String&nbsp;machineName,
              <a href="../auditorium/IAuditoriumParams.html" title="interface in auditorium">IAuditoriumParams</a>&nbsp;constants)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>machineName</code> - The host needs to be given an ID unique across the network.
            There also needs to be an entry in the keystore that
            corresponds to this ID.</dd><dd><code>constants</code> - The host will get constant information from this instance
            (timeouts, file locations, etc.)</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getMyIP()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMyIP</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getMyIP()</pre>
<div class="block">Get the IP address of this machine. This method returns the first
 non-loopback or link local address it can find.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>This method returns the IP address of this host.</dd></dl>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()
           throws <a href="../auditorium/NetworkException.html" title="class in auditorium">NetworkException</a></pre>
<div class="block">Start the threads.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../auditorium/NetworkException.html" title="class in auditorium">NetworkException</a></code> - This method throws if ports couldn't be bound successfully.</dd></dl>
</li>
</ul>
<a name="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block">Stop the threads.</div>
</li>
</ul>
<a name="disconnect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnect</h4>
<pre>public&nbsp;void&nbsp;disconnect()</pre>
<div class="block">Disconnect all links, but continue running threads (and continue
 accepting join requests).</div>
</li>
</ul>
<a name="discover()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>discover</h4>
<pre>public&nbsp;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>[]&nbsp;discover()
                       throws <a href="../auditorium/NetworkException.html" title="class in auditorium">NetworkException</a></pre>
<div class="block">Discover if there are other hosts nearby. The discovery process is
 carried out in the calling thread. Expect this call to block for 5
 seconds.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>This method returns an array of pointers to nearby hosts.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../auditorium/NetworkException.html" title="class in auditorium">NetworkException</a></code></dd></dl>
</li>
</ul>
<a name="join(auditorium.HostPointer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>join</h4>
<pre>public&nbsp;void&nbsp;join(<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&nbsp;host)
          throws <a href="../auditorium/NetworkException.html" title="class in auditorium">NetworkException</a></pre>
<div class="block">Create a link to a specific host. The join is carried out in the calling
 thread. Expect this call to block for a short amount of time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>host</code> - Join this host</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../auditorium/NetworkException.html" title="class in auditorium">NetworkException</a></code></dd></dl>
</li>
</ul>
<a name="announce(sexpression.ASExpression)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>announce</h4>
<pre>public&nbsp;void&nbsp;announce(<a href="../sexpression/ASExpression.html" title="class in sexpression">ASExpression</a>&nbsp;announcement)</pre>
<div class="block">Place an announcement on the wire and log it. This call returns quickly
 and the behavior is carried out in an auditorium-managed worker thread.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>announcement</code> - Place this announcement on the wire.</dd></dl>
</li>
</ul>
<a name="listen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listen</h4>
<pre>public&nbsp;<a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium">AuditoriumHost.Pair</a>&nbsp;listen()
                           throws <a href="../auditorium/ReleasedQueueException.html" title="class in auditorium">ReleasedQueueException</a></pre>
<div class="block">Listen for a broadcast message, and return when it happens. This method
 blocks unless/until messages have been/are received.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>This method returns the broadcast message at the front of the
         queue if the queue is non-empty, or the next-heard broadcast
         message if it is empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../auditorium/ReleasedQueueException.html" title="class in auditorium">ReleasedQueueException</a></code> - This method throws if stop is called while you're waiting for
             messages.</dd></dl>
</li>
</ul>
<a name="getLayerByName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLayerByName</h4>
<pre>public&nbsp;<a href="../auditorium/IAuditoriumLayer.html" title="interface in auditorium">IAuditoriumLayer</a>&nbsp;getLayerByName(java.lang.String&nbsp;layer)
                                throws <a href="../auditorium/LayerNotFoundException.html" title="class in auditorium">LayerNotFoundException</a></pre>
<div class="block">Ask the host if it knows of a layer with the given name. If so, get a
 reference to it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>layer</code> - Ask for a reference to the layer that has this name.</dd>
<dt><span class="strong">Returns:</span></dt><dd>This method returns a reference to the layer which has the
         provided name, if such a layer exists</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../auditorium/LayerNotFoundException.html" title="class in auditorium">LayerNotFoundException</a></code> - This method throws if no layer exists which matches the given
             name.</dd></dl>
</li>
</ul>
<a name="registerForJoined(java.util.Observer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerForJoined</h4>
<pre>public&nbsp;void&nbsp;registerForJoined(java.util.Observer&nbsp;observer)</pre>
<div class="block">Register an observer to be notified when new nodes join this one.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>observer</code> - Register this observer. In the update method, expect that the
            argument will be of type HostPointer.</dd></dl>
</li>
</ul>
<a name="registerForLeft(java.util.Observer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerForLeft</h4>
<pre>public&nbsp;void&nbsp;registerForLeft(java.util.Observer&nbsp;observer)</pre>
<div class="block">Register an observer to be notified when a particular node leaves the
 network.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>observer</code> - This observer will be notified when a host leaves the network.</dd></dl>
</li>
</ul>
<a name="getMe()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMe</h4>
<pre>public&nbsp;<a href="../auditorium/HostPointer.html" title="class in auditorium">HostPointer</a>&nbsp;getMe()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../auditorium/IAuditoriumHost.html#getMe()">IAuditoriumHost</a></code></strong></div>
<div class="block">Get a pointer to the host.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#getMe()">getMe</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>This method returns a HostPointer instance that refers to this
         host.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#getMe()"><code>IAuditoriumHost.getMe()</code></a></dd></dl>
</li>
</ul>
<a name="getNodeId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeId</h4>
<pre>public&nbsp;java.lang.String&nbsp;getNodeId()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../auditorium/IAuditoriumHost.html#getNodeId()">IAuditoriumHost</a></code></strong></div>
<div class="block">Get the node ID of this auditorium host. This uniquely identifies this
 host from all other hosts that could possibly be on the network.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#getNodeId()">getNodeId</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>This method returns the unique host identifier.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#getNodeId()"><code>IAuditoriumHost.getNodeId()</code></a></dd></dl>
</li>
</ul>
<a name="getLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLog</h4>
<pre>public&nbsp;<a href="../auditorium/Log.html" title="class in auditorium">Log</a>&nbsp;getLog()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../auditorium/IAuditoriumHost.html#getLog()">IAuditoriumHost</a></code></strong></div>
<div class="block">Get the Log instance. This is the interface that is used to both
 serialize messages to the log and keep track of what messages have been
 logged in the past.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#getLog()">getLog</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>This method returns the host's log instance.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#getLog()"><code>IAuditoriumHost.getLog()</code></a></dd></dl>
</li>
</ul>
<a name="nextSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextSequence</h4>
<pre>public&nbsp;java.lang.String&nbsp;nextSequence()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#nextSequence()">nextSequence</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>This method returns the incremented sequence number counter's
         value.Call this method when making messages to put on the wire,
         to determine what the sequence number should be.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#nextSequence()"><code>IAuditoriumHost.nextSequence()</code></a></dd></dl>
</li>
</ul>
<a name="getAddresses()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddresses</h4>
<pre>public&nbsp;<a href="../sexpression/ListExpression.html" title="class in sexpression">ListExpression</a>&nbsp;getAddresses()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../auditorium/IAuditoriumHost.html#getAddresses()">IAuditoriumHost</a></code></strong></div>
<div class="block">Get all the addresses that are in this network.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#getAddresses()">getAddresses</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>This method returns an s-expression representation of all
         addresses that are a member of this network.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#getAddresses()"><code>IAuditoriumHost.getAddresses()</code></a></dd></dl>
</li>
</ul>
<a name="receiveAnnouncement(auditorium.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAnnouncement</h4>
<pre>public&nbsp;void&nbsp;receiveAnnouncement(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../auditorium/IAuditoriumHost.html#receiveAnnouncement(auditorium.Message)">IAuditoriumHost</a></code></strong></div>
<div class="block">Notify the host that message was received on a link. Links should call
 this method.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#receiveAnnouncement(auditorium.Message)">receiveAnnouncement</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Notify the host that this message was received on the link.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#receiveAnnouncement(auditorium.Message)"><code>IAuditoriumHost.receiveAnnouncement(auditorium.Message)</code></a></dd></dl>
</li>
</ul>
<a name="removeLink(auditorium.Link)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeLink</h4>
<pre>public&nbsp;void&nbsp;removeLink(<a href="../auditorium/Link.html" title="class in auditorium">Link</a>&nbsp;link)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../auditorium/IAuditoriumHost.html#removeLink(auditorium.Link)">IAuditoriumHost</a></code></strong></div>
<div class="block">Remove this host's link</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../auditorium/IAuditoriumHost.html#removeLink(auditorium.Link)">removeLink</a></code>&nbsp;in interface&nbsp;<code><a href="../auditorium/IAuditoriumHost.html" title="interface in auditorium">IAuditoriumHost</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>link</code> - Remove this link</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../auditorium/IAuditoriumHost.html#removeLink(auditorium.Link)"><code>IAuditoriumHost.removeLink(auditorium.Link)</code></a></dd></dl>
</li>
</ul>
<a name="joinListenerThread()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinListenerThread</h4>
<pre>private&nbsp;void&nbsp;joinListenerThread()</pre>
</li>
</ul>
<a name="announceThread()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>announceThread</h4>
<pre>private&nbsp;void&nbsp;announceThread()</pre>
</li>
</ul>
<a name="receiveThread()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveThread</h4>
<pre>private&nbsp;void&nbsp;receiveThread()</pre>
</li>
</ul>
<a name="flood(auditorium.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flood</h4>
<pre>private&nbsp;void&nbsp;flood(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</pre>
<div class="block">Assume lock is already acquired!</div>
</li>
</ul>
<a name="logMessage(auditorium.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logMessage</h4>
<pre>private&nbsp;void&nbsp;logMessage(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)
                 throws java.io.IOException</pre>
<div class="block">Assume lock is already acquired!</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="verify(auditorium.Message)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>verify</h4>
<pre>private&nbsp;void&nbsp;verify(<a href="../auditorium/Message.html" title="class in auditorium">Message</a>&nbsp;message)</pre>
<div class="block">Add a message to the verifier's log data, and if the counter is a
 multiple of 10, run the verifier.

 verify() is a no-op if no verifier is instantiated, which in turn
 occurs if no rule file is specified; see AuditoriumHost() and
 IAuditoriumParams.getRuleFile().

 TODO: 10 is totally arbitrary. This needs to be reconsidered (possibly
 parameterized, or removed entirely in the face of a new iterative
 verifier).  Also, some applications may want verification but not
 incremental (per-message) verification.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Add this message.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../auditorium/AuditoriumDiscoveryHost.html" title="class in auditorium"><span class="strong">Prev Class</span></a></li>
<li><a href="../auditorium/AuditoriumHost.Pair.html" title="class in auditorium"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?auditorium/AuditoriumHost.html" target="_top">Frames</a></li>
<li><a href="AuditoriumHost.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
